{"data":{"markdownRemark":{"excerpt":"\nJust recently, Om Next added support for server-side rendering. This is a very exciting\naddition, which greatly improves Om's fullstack story, making it possible to add\nconsiderable performance improvements to your app's initial render.\n\n","html":"<p>Just recently, Om Next added support for server-side rendering. This is a very exciting\naddition, which greatly improves Om's fullstack story, making it possible to add\nconsiderable performance improvements to your app's initial render.</p>\n<!--more-->\n<div style=\"margin:30px\">\n  <img style=\"max-width:45%;margin:0 auto\" src=\"https://cloud.githubusercontent.com/assets/661909/18569433/75929366-7b9a-11e6-9e91-2d7b98cc1ac2.png\">\n</div>\n<p>A <a href=\"https://github.com/omcljs/om/pull/764\">recent change</a> to the Om project adds the\npossibility to render Om Next components to a string. This feature resonates really\nwell with the fullstack story that Om Next aims to provide. Additionally, it has\ngreat potential for making Om Next apps render much faster, by including all the\nmarkup in initial server responses, which React would only render when the browser\nloaded the app's JavaScript.</p>\n<p>Om Next's approach to server-side rendering had been developed on the separate\n<a href=\"https://github.com/ladderlife/cellophane\">Cellophane repository</a> for some time,\ninspired by the concepts presented in the very insightful\n<a href=\"https://www.youtube.com/watch?v=fICC26GGBpg\">\"Optimizing ClojureScript Apps For Speed\"</a>\ntalk by <a href=\"https://twitter.com/arohner\">Allen Rohner</a>, and his <a href=\"https://github.com/arohner/foam\">Foam</a>\nproject.</p>\n<p>Everything that is necessary to render an entire Om Next application to a string\nruns entirely in the JVM, via Clojure, without involving React or JavaScript at\nany stage. What really is very exciting about Om Next server-side rendering (to me, at\nleast!) are the following:</p>\n<ul>\n<li>the returned markup gets picked up by React. This means that the\n<a href=\"https://facebook.github.io/react/docs/top-level-api.html#reactdomserver.rendertostring\">DOM elements are preserved and React only attaches event handlers</a>.\nPretty cool, huh?</li>\n<li>it's blazingly fast: at least 2x faster than <a href=\"https://github.com/weavejester/hiccup\">Hiccup</a>.\nThere are some <a href=\"https://github.com/ladderlife/cellophane/blob/master/perf/cellophane/perf.clj\">performance benchmarks</a>\nin the Cellophane repo.</li>\n</ul>\n<p>What's more, and probably expected, is that the API is exactly the same. Here's a\nvery simple example:</p>\n<div class=\"gatsby-highlight\" data-language=\"clojure\"><pre class=\"language-clojure\"><code class=\"language-clojure\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">ns</span> my-project.core\n  <span class=\"token punctuation\">(</span><span class=\"token operator\">:require</span> <span class=\"token punctuation\">[</span>om.<span class=\"token keyword\">next</span> <span class=\"token operator\">:as</span> om <span class=\"token operator\">:refer</span> <span class=\"token punctuation\">[</span>defui<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n            <span class=\"token punctuation\">[</span>om.dom <span class=\"token operator\">:as</span> dom<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">(</span>defui SimpleComponent\n  Object\n  <span class=\"token punctuation\">(</span>render <span class=\"token punctuation\">[</span>this<span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">(</span>dom/div <span class=\"token boolean\">nil</span> <span class=\"token string\">\"Hello, world!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">def</span> simple-factory <span class=\"token punctuation\">(</span>om/factory SimpleComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">(</span>dom/render-to-str <span class=\"token punctuation\">(</span>simple-factory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">;; \"&lt;div data-reactroot=\\\"\\\" data-reactid=\\\"1\\\" data-react-checksum=\\\"1632637923\\\">Hello, world!&lt;/div>\"</span></code></pre></div>\n<p>I've also put together a <a href=\"https://github.com/anmonteiro/om-next-fullstack\">repository</a>\nwith a fullstack example application that demonstrates how to hook up server-side\nrendering in your own Om Next app. I encourage you try it out. To make sure it is\nindeed working, go ahead and disable JavaScript! Meanwhile, server-side rendering\nis now part of the <code class=\"language-text\">1.0.0-alpha45</code> release.</p>\n<p>Hit me up with any questions you might have in the comments below or on Twitter,\n<a href=\"https://twitter.com/_anmonteiro\">@_anmonteiro</a>.</p>\n<p>Thanks for reading!</p>","fields":{"title":"Om Next Server-Side Rendering","date":"15 Sep 2016","tags":["clojure","clojurescript","om"],"slug":"/2016/09/om-next-server-side-rendering/","url":"https://anmonteiro.com/2016/09/om-next-server-side-rendering/"}},"allPosts":{"edges":[{"node":{"fields":{"title":"Reason and the Language Server Protocol: The Landscape","slug":"/2018/11/reason-and-the-language-server-protocol-the-landscape/","tags":["reason","ocaml","emacs","editors"],"date":"17 Nov 2018"}}},{"node":{"fields":{"title":"The State of ClojureScript Compilation in Lumo","slug":"/2017/09/the-state-of-clojurescript-compilation-in-lumo/","tags":["clojure","clojurescript","lumo"],"date":"19 Sep 2017"}}},{"node":{"fields":{"title":"Shipping a (very simplistic) ReasonReact app","slug":"/2017/08/shipping-a-very-simplistic-reasonreact-app/","tags":["reason","ocaml"],"date":"20 Aug 2017"}}},{"node":{"fields":{"title":"On Lumo's Growth and Sustainability","slug":"/2017/05/on-lumos-growth-and-sustainability/","tags":["clojure","clojurescript","lumo"],"date":"01 May 2017"}}},{"node":{"fields":{"title":"Requiring Node.js modules from ClojureScript namespaces","slug":"/2017/03/requiring-node-js-modules-from-clojurescript-namespaces/","tags":["clojure","clojurescript","node","nodejs"],"date":"17 Mar 2017"}}},{"node":{"fields":{"title":"Compiling ClojureScript Projects Without the JVM","slug":"/2017/02/compiling-clojurescript-projects-without-the-jvm/","tags":["clojure","clojurescript","lumo"],"date":"21 Feb 2017"}}},{"node":{"fields":{"title":"The fastest Clojure REPL in the world","slug":"/2016/11/the-fastest-clojure-repl-in-the-world/","tags":["clojure","clojurescript","lumo"],"date":"09 Nov 2016"}}},{"node":{"fields":{"title":"ClojureScript `require` outside `ns`","slug":"/2016/10/clojurescript-require-outside-ns/","tags":["clojure","clojurescript"],"date":"02 Oct 2016"}}},{"node":{"fields":{"title":"Om Next internals: Incremental Rendering","slug":"/2016/09/om-next-internals-incremental-rendering/","tags":["clojure","clojurescript","om"],"date":"29 Sep 2016"}}},{"node":{"fields":{"title":"Om Next Server-Side Rendering","slug":"/2016/09/om-next-server-side-rendering/","tags":["clojure","clojurescript","om"],"date":"15 Sep 2016"}}},{"node":{"fields":{"title":"Om Next at Full Stack Fest 2016","slug":"/2016/09/om-next-at-full-stack-fest-2016/","tags":["talks","clojure","clojurescript","om"],"date":"14 Sep 2016"}}},{"node":{"fields":{"title":"Om Next and Bootstrapped ClojureScript","slug":"/2016/08/om-next-and-bootstrapped-clojurescript/","tags":["clojure","clojurescript","om"],"date":"24 Aug 2016"}}},{"node":{"fields":{"title":"ClojureScript `require` now supports `:rename`","slug":"/2016/08/clojurescript-require-now-supports-rename/","tags":["clojure","clojurescript"],"date":"10 Aug 2016"}}},{"node":{"fields":{"title":"The quest for a unified routing solution in Om Next","slug":"/2016/06/the-quest-for-a-unified-routing-solution-in-om-next/","tags":["clojure","clojurescript","om"],"date":"12 Jun 2016"}}},{"node":{"fields":{"title":"&apos;Clients in control&apos; — Om Next at Craft Conference 2016","slug":"/2016/05/clients-in-control-om-next-craft-conf-2016/","tags":["talks","clojure","clojurescript","om"],"date":"14 May 2016"}}},{"node":{"fields":{"title":"Routing in Om Next — a Catalog of Approaches","slug":"/2016/02/routing-in-om-next-a-catalog-of-approaches/","tags":["clojure","clojurescript","om"],"date":"22 Feb 2016"}}},{"node":{"fields":{"title":"Om Next meets Devcards — the full reloadable experience","slug":"/2016/02/om-next-meets-devcards-the-full-reloadable-experience/","tags":["clojure","clojurescript","om"],"date":"01 Feb 2016"}}},{"node":{"fields":{"title":"Writing Om Next Reloadable Code — A Checklist","slug":"/2016/01/writing-om-next-reloadable-code-a-checklist/","tags":["clojure","clojurescript","om"],"date":"21 Jan 2016"}}},{"node":{"fields":{"title":"An Exploration of Object Recursion Design Patterns with Om Next Recursive Queries - Part 2","slug":"/2016/01/exploration-patterns-om-next-part-2/","tags":["clojure","clojurescript","om"],"date":"09 Jan 2016"}}},{"node":{"fields":{"title":"An Exploration of Object Recursion Design Patterns with Om Next Recursive Queries - Part 1","slug":"/2016/01/exploration-patterns-om-next-part-1/","tags":["clojure","clojurescript","om"],"date":"07 Jan 2016"}}},{"node":{"fields":{"title":"Om Next Query Syntax Explained","slug":"/2016/01/om-next-query-syntax/","tags":["clojure","clojurescript","om"],"date":"04 Jan 2016"}}},{"node":{"fields":{"title":"Om Next Study Material","slug":"/2015/12/om-next-study-material/","tags":["clojure","clojurescript","om"],"date":"10 Dec 2015"}}},{"node":{"fields":{"title":"clj-isitup - a simple isitup.org API client","slug":"/2015/11/clj-isitup-a-simple-isitup-org-api-client/","tags":["clojure"],"date":"17 Nov 2015"}}},{"node":{"fields":{"title":"Hosting files on the cloud via GitHub Issues","slug":"/2015/09/hosting-files-on-the-cloud-via-github-issues/","tags":["git","GitHub"],"date":"26 Sep 2015"}}},{"node":{"fields":{"title":"Solving Closure Library's Html5history double event dispatch","slug":"/2015/09/solving-closure-librarys-html5history-double-event-dispatch/","tags":["clojure","clojurescript"],"date":"11 Sep 2015"}}},{"node":{"fields":{"title":"Setting up Heroku config variables with Clojure","slug":"/2015/09/setting-up-heroku-config-variables-with-clojure/","tags":["clojure","heroku"],"date":"03 Sep 2015"}}},{"node":{"fields":{"title":"Jekyll related posts revamped","slug":"/2015/08/jekyll-related-posts-revamped/","tags":["jekyll"],"date":"29 Aug 2015"}}},{"node":{"fields":{"title":"Custom subdomains in GitHub project pages","slug":"/2015/08/custom-subdomains-in-github-project-pages/","tags":["git","GitHub"],"date":"24 Aug 2015"}}},{"node":{"fields":{"title":"Grand opening","slug":"/2015/08/grand-opening/","tags":["lifestyle"],"date":"18 Aug 2015"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2016/09/om-next-server-side-rendering/"}}