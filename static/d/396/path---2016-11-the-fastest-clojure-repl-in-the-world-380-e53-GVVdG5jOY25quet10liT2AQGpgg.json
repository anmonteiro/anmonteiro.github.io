{"data":{"markdownRemark":{"excerpt":"\nOne common complaint of Clojure REPLs is their [startup time](http://puredanger.github.io/tech.puredanger.com/2013/12/01/clj-problems/).\nAlthough that complaint is often somewhat unfounded (and related to tooling), it\nstill takes the bare Clojure JAR about 1 second to start on new hardware. [Planck](http://planck-repl.org)\n— through bootstrapped ClojureScript, and owing to the small latency exhibited by\nJavaScript VMs — managed to improve the time that it takes to bootstrap a Clojure(Script)\nREPL. A new kid on the block promises to perform even faster. Read on!\n\n","html":"<p>One common complaint of Clojure REPLs is their <a href=\"http://puredanger.github.io/tech.puredanger.com/2013/12/01/clj-problems/\">startup time</a>.\nAlthough that complaint is often somewhat unfounded (and related to tooling), it\nstill takes the bare Clojure JAR about 1 second to start on new hardware. <a href=\"http://planck-repl.org\">Planck</a>\n— through bootstrapped ClojureScript, and owing to the small latency exhibited by\nJavaScript VMs — managed to improve the time that it takes to bootstrap a Clojure(Script)\nREPL. A new kid on the block promises to perform even faster. Read on!</p>\n<!--more-->\n<h2>Motivation</h2>\n<p>Not long ago, <a href=\"https://twitter.com/craigandera\">Craig Andera</a> mentioned on Twitter\nthat he had succeeded in compiling a ClojureScript application to a standalone native\nexecutable, using a tool called <a href=\"https://github.com/jaredallard/nexe\">Nexe</a>:</p>\n<div style=\"display:table;margin:0 auto 20px;\">\n  <blockquote class=\"twitter-tweet\" data-lang=\"en\">\n    <p lang=\"en\" dir=\"ltr\">Just got ClojureScript -&gt; Native EXE working via Node&#39;s nexe. Nice.</p>\n    &mdash; Craig Andera (@craigandera)\n    <a href=\"https://twitter.com/craigandera/status/778977347206864896\">September 22, 2016</a>\n  </blockquote>\n  <script async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n</div>\n<p>Being a big fan of <a href=\"https://twitter.com/mfikes\">Mike Fikes</a>'s Planck, its instant\nstartup and scripting capabilities, I was intrigued to validate the idea that we\ncould have something similar for the <a href=\"http://nodejs.org/\">Node.js</a> platform. Whether\nwe like it or not, Node.js's <a href=\"https://www.npmjs.com/\">NPM</a> is the <a href=\"http://www.modulecounts.com/\">largest and fastest growing</a>\npackage ecosystem today. Seamless interoperability with NPM plays a huge part in\nextending ClojureScript's reach even further. And as it turns out, this is possible\ntoday.</p>\n<h2>Introducing Lumo</h2>\n<p><a href=\"https://github.com/anmonteiro/lumo\">Lumo</a> is a fast, standalone ClojureScript REPL\nthat runs on Node.js and <a href=\"https://developers.google.com/v8/\">V8</a>. Thanks to V8's\n<a href=\"http://v8project.blogspot.com/2015/09/custom-startup-snapshots.html\">custom startup snapshots</a>,\nLumo starts up instantaneously, making it the fastest Clojure REPL in existence\n<sup id=\"fnref:1\"><sub><a href=\"#fn:1\">1</a></sub></sup>. Here's a rundown comparison\nof Clojure, Planck and Lumo's startup times.</p>\n<div style=\"margin:-20px auto\">\n  <img style=\"margin:0\" src=\"https://cloud.githubusercontent.com/assets/661909/20039553/440a3554-a446-11e6-9478-91229ccc21ab.png\">\n</div>\n<p>Lumo employs some tricks to be extremely fast. Some of these (<a href=\"http://blog.fikesfarm.com/posts/2015-11-26-planck-caching.html\">caching</a>,\n<a href=\"http://blog.fikesfarm.com/posts/2016-01-04-planck-lazy-analysis-cache-loading.html\">lazy analysis cache loading</a>\nand <a href=\"http://blog.fikesfarm.com/posts/2016-02-03-planck-macros-aot.html\">AOT-compiled macros</a>)\nwere directly inspired by Planck. Others, such as the V8 startup snapshot feature\nthat is not present in JavaScriptCore, will be the focus of subsequent posts in\nthis blog.</p>\n<p>Oh, and did I mention Lumo is cross-platform? Here's a screenshot of it happily\nrunning on Windows:</p>\n<div style=\"margin:30px auto\">\n  <img style=\"max-width:80%;margin:20px auto\" src=\"https://cloud.githubusercontent.com/assets/661909/20039745/71c051ce-a449-11e6-9ebb-c01d813c1980.png\">\n</div>\n<h2>Peeking into the future</h2>\n<p>Lumo is not complete by any means. The initial release has a substantial set of features\n(while we work on setting up a documentation website, you can get a notion of these\nby running <code class=\"language-text\">lumo -h</code> or <code class=\"language-text\">lumo --help</code>), but many more are expected to arrive in\nthe near future. Among these are ergonomic additions such as cursor hopping, pretty\nprinting and colored output, as well as idiomatic ClojureScript wrappers for Node's\nAPIs, such as performing I/O calls, spawning child processes and more.</p>\n<h2>Wrapping up</h2>\n<p>Lumo is free and <a href=\"https://github.com/anmonteiro/lumo\">open source</a>. I think it can\nserve numerous purposes, many of which I'm unable to predict. I also think that's\na good thing. If you want to try it out, there are standalone binaries for Mac, Windows\nand Linux <a href=\"https://github.com/anmonteiro/lumo/releases/latest\">here</a>. Be sure to\nlet me know what you think! I'm <a href=\"https://twitter.com/_anmonteiro\">@_anmonteiro</a>\non Twitter.</p>\n<p>I'm curious to learn how you will use Lumo. Thanks for reading!</p>\n<hr>\n<div id=\"fn:1\">\n  <sup><sub>1</sub></sup> <sub>or rather, the one with fastest startup. Lumo runs\nbootstrapped ClojureScript, and compiling ClojureScript in JavaScript is generally\nslower than compiling ClojureScript on the JVM.\n  <a href=\"#fnref:1\"><img draggable=\"false\" class=\"emoji\" alt=\"&#x21A9;\" src=\"/public/img/top.svg\"></a></sub>\n</div>\n<br>\n*<small>Thanks to <a href=\"https://twitter.com/mfikes\">Mike Fikes</a> for reading a draft of this post.</small>*","fields":{"title":"The fastest Clojure REPL in the world","date":"09 Nov 2016","tags":["clojure","clojurescript","lumo"],"slug":"/2016/11/the-fastest-clojure-repl-in-the-world/","url":"https://anmonteiro.com/2016/11/the-fastest-clojure-repl-in-the-world/"}},"allPosts":{"edges":[{"node":{"fields":{"title":"On OCaml and the JS platform","slug":"/2021/12/on-ocaml-and-the-js-platform/","tags":["reason","ocaml","rescript"],"date":"12 Dec 2021"}}},{"node":{"fields":{"title":"On OCaml and the JS platform","slug":"/2021/12/on-ocaml-and-the-js-platform/","tags":["reason","ocaml","rescript"],"date":"11 Dec 2021"}}},{"node":{"fields":{"title":"Reason and the Language Server Protocol: The Landscape","slug":"/2018/11/reason-and-the-language-server-protocol-the-landscape/","tags":["reason","ocaml","emacs","editors"],"date":"17 Nov 2018"}}},{"node":{"fields":{"title":"The State of ClojureScript Compilation in Lumo","slug":"/2017/09/the-state-of-clojurescript-compilation-in-lumo/","tags":["clojure","clojurescript","lumo"],"date":"19 Sep 2017"}}},{"node":{"fields":{"title":"Shipping a (very simplistic) ReasonReact app","slug":"/2017/08/shipping-a-very-simplistic-reasonreact-app/","tags":["reason","ocaml"],"date":"20 Aug 2017"}}},{"node":{"fields":{"title":"On Lumo's Growth and Sustainability","slug":"/2017/05/on-lumos-growth-and-sustainability/","tags":["clojure","clojurescript","lumo"],"date":"01 May 2017"}}},{"node":{"fields":{"title":"Requiring Node.js modules from ClojureScript namespaces","slug":"/2017/03/requiring-node-js-modules-from-clojurescript-namespaces/","tags":["clojure","clojurescript","node","nodejs"],"date":"17 Mar 2017"}}},{"node":{"fields":{"title":"Compiling ClojureScript Projects Without the JVM","slug":"/2017/02/compiling-clojurescript-projects-without-the-jvm/","tags":["clojure","clojurescript","lumo"],"date":"21 Feb 2017"}}},{"node":{"fields":{"title":"The fastest Clojure REPL in the world","slug":"/2016/11/the-fastest-clojure-repl-in-the-world/","tags":["clojure","clojurescript","lumo"],"date":"09 Nov 2016"}}},{"node":{"fields":{"title":"ClojureScript `require` outside `ns`","slug":"/2016/10/clojurescript-require-outside-ns/","tags":["clojure","clojurescript"],"date":"02 Oct 2016"}}},{"node":{"fields":{"title":"Om Next internals: Incremental Rendering","slug":"/2016/09/om-next-internals-incremental-rendering/","tags":["clojure","clojurescript","om"],"date":"29 Sep 2016"}}},{"node":{"fields":{"title":"Om Next Server-Side Rendering","slug":"/2016/09/om-next-server-side-rendering/","tags":["clojure","clojurescript","om"],"date":"15 Sep 2016"}}},{"node":{"fields":{"title":"Om Next at Full Stack Fest 2016","slug":"/2016/09/om-next-at-full-stack-fest-2016/","tags":["talks","clojure","clojurescript","om"],"date":"14 Sep 2016"}}},{"node":{"fields":{"title":"Om Next and Bootstrapped ClojureScript","slug":"/2016/08/om-next-and-bootstrapped-clojurescript/","tags":["clojure","clojurescript","om"],"date":"24 Aug 2016"}}},{"node":{"fields":{"title":"ClojureScript `require` now supports `:rename`","slug":"/2016/08/clojurescript-require-now-supports-rename/","tags":["clojure","clojurescript"],"date":"10 Aug 2016"}}},{"node":{"fields":{"title":"The quest for a unified routing solution in Om Next","slug":"/2016/06/the-quest-for-a-unified-routing-solution-in-om-next/","tags":["clojure","clojurescript","om"],"date":"12 Jun 2016"}}},{"node":{"fields":{"title":"&apos;Clients in control&apos; — Om Next at Craft Conference 2016","slug":"/2016/05/clients-in-control-om-next-craft-conf-2016/","tags":["talks","clojure","clojurescript","om"],"date":"14 May 2016"}}},{"node":{"fields":{"title":"Routing in Om Next — a Catalog of Approaches","slug":"/2016/02/routing-in-om-next-a-catalog-of-approaches/","tags":["clojure","clojurescript","om"],"date":"22 Feb 2016"}}},{"node":{"fields":{"title":"Om Next meets Devcards — the full reloadable experience","slug":"/2016/02/om-next-meets-devcards-the-full-reloadable-experience/","tags":["clojure","clojurescript","om"],"date":"01 Feb 2016"}}},{"node":{"fields":{"title":"Writing Om Next Reloadable Code — A Checklist","slug":"/2016/01/writing-om-next-reloadable-code-a-checklist/","tags":["clojure","clojurescript","om"],"date":"21 Jan 2016"}}},{"node":{"fields":{"title":"An Exploration of Object Recursion Design Patterns with Om Next Recursive Queries - Part 2","slug":"/2016/01/exploration-patterns-om-next-part-2/","tags":["clojure","clojurescript","om"],"date":"09 Jan 2016"}}},{"node":{"fields":{"title":"An Exploration of Object Recursion Design Patterns with Om Next Recursive Queries - Part 1","slug":"/2016/01/exploration-patterns-om-next-part-1/","tags":["clojure","clojurescript","om"],"date":"07 Jan 2016"}}},{"node":{"fields":{"title":"Om Next Query Syntax Explained","slug":"/2016/01/om-next-query-syntax/","tags":["clojure","clojurescript","om"],"date":"04 Jan 2016"}}},{"node":{"fields":{"title":"Om Next Study Material","slug":"/2015/12/om-next-study-material/","tags":["clojure","clojurescript","om"],"date":"10 Dec 2015"}}},{"node":{"fields":{"title":"clj-isitup - a simple isitup.org API client","slug":"/2015/11/clj-isitup-a-simple-isitup-org-api-client/","tags":["clojure"],"date":"17 Nov 2015"}}},{"node":{"fields":{"title":"Hosting files on the cloud via GitHub Issues","slug":"/2015/09/hosting-files-on-the-cloud-via-github-issues/","tags":["git","GitHub"],"date":"26 Sep 2015"}}},{"node":{"fields":{"title":"Solving Closure Library's Html5history double event dispatch","slug":"/2015/09/solving-closure-librarys-html5history-double-event-dispatch/","tags":["clojure","clojurescript"],"date":"11 Sep 2015"}}},{"node":{"fields":{"title":"Setting up Heroku config variables with Clojure","slug":"/2015/09/setting-up-heroku-config-variables-with-clojure/","tags":["clojure","heroku"],"date":"03 Sep 2015"}}},{"node":{"fields":{"title":"Jekyll related posts revamped","slug":"/2015/08/jekyll-related-posts-revamped/","tags":["jekyll"],"date":"29 Aug 2015"}}},{"node":{"fields":{"title":"Custom subdomains in GitHub project pages","slug":"/2015/08/custom-subdomains-in-github-project-pages/","tags":["git","GitHub"],"date":"24 Aug 2015"}}},{"node":{"fields":{"title":"Grand opening","slug":"/2015/08/grand-opening/","tags":["lifestyle"],"date":"18 Aug 2015"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2016/11/the-fastest-clojure-repl-in-the-world/"}}